<?xml version="1.0" encoding="UTF-8"?>
<Module>
<!--
opensocial-jquery
http://code.google.com/p/opensocial-jquery/

Copyright(C) 2008 LEARNING RESOURCE LAB
http://friendfeed.com/nakajiman
http://hp.submit.ne.jp/d/16750/

Dual licensed under the MIT and GPL licenses:
http://www.opensource.org/licenses/mit-license.php
http://www.gnu.org/licenses/gpl.html
-->
<ModulePrefs title="appdata - jQuery.getData - opensocial-jquery">
<Require feature="opensocial-0.8" />
</ModulePrefs>
<Content type="html"><![CDATA[
<script type="text/javascript" src="http://developmentor.lrlab.to/opensocial-jquery/opensocial-jquery.min.js"></script>
<script type="text/javascript">
jQuery(function($) {
  
  // Global Events
  $('#event1')
    .ajaxStart(function() { console.log('ajaxStart'); })
    .ajaxSend(function() { console.log('ajaxSend'); })
    .ajaxSuccess(function() { console.log('ajaxSuccess'); })
    .ajaxError(function() { console.log('ajaxError'); })
    .ajaxComplete(function() { console.log('ajaxComplete'); })
    .ajaxStop(function() { console.log('ajaxStop'); });
/*
  $.ajax({
    url: '/appdata/@viewer/@self',
    data: {},
    dataType: 'data',
    success: function(data) {
	  $.each(data, function(userId, data) {
		console.info(userId);
		console.info(data.comment.text);
		console.info(data.comment.lastModified);
        console.info(data.feeling);
	  });
    },
    error: function(xhr, status, e) {
      console.error(xhr, status, e);
    }
  });
*/
/*
  $.ajax({
    type: 'post',
    url: '/appdata/@viewer/@self',
    data: {
        comment: { text: 'Say Hello!', lastModified: new Date().getTime() },
        feeling: 'well'
    },
    dataType: 'data',
    success: function() {},
    error: function(xhr, status, e) {
      console.error(xhr, status, e);
    }
  });
*/
/*
  $.postData('/appdata/@viewer/@self', {
    comment: { text: 'Say Hello!', lastModified: new Date().getTime() },
    feeling: 'well',
    footprint: true
  }, function() {});
*/  
/*
  $.get('/appdata/@viewer/@self', {}, function(data) {
	  $.each(data, function(userId, data) {
		console.info(userId);
		console.info(data.comment.text);
		console.info(data.comment.lastModified);
        console.info(data.feeling);
	  });
  }, 'data');
*/

/*
  $.getData('/appdata/@owner/@self', {}, function(data) {
	  $.each(data, function(userId, data) {
		console.info(userId);
		console.info(data.comment.text);
		console.info(data.comment.lastModified);
        console.info(data.feeling);
        console.info(data.footprint);
	  });
  });
*/

  $.ajax({
    url: '/people/@viewer/@friends',
	data: {},
	dataType: 'data'
  }).next(function(people) {

      return $.ajax({
        url: '/appdata/@viewer/@friends',
	    data: {},
		dataType: 'data'
	  }).next(function(data) {

		return $.map(people, function(person) {
	       if (data[person.id])
		     person.data = data[person.id];
		   return person;
		});
	  
	  });

  }).next(function(people) {

    $.each(people, function(i, person) {
	  console.info(person);
	});

  }).error(function(e) {
    console.error(e);
  });
  
  /**
   * success
   */

/*
  var url = '/appdata/@me/@self';
  var data = {
  };

  $.ajax({
    url: url, data: data, dataType: 'data',
	success: function(data) { console.info(data); },
	error: function(xhr) { console.info(xhr); },
	complete: function() {
	  console.log(arguments);
	}
  });

  //$.getData(url, data, function(data, status) {
  //  console.info(data);
  //});
*/
/*
  var url = '/appdata/@me/@friends';
  var data = {
    fields: 'foo,key'
  };

  $.getData(url, data).next(function(data) {
    console.info(data);
  });
*/
/*
  var url = '/appdata/@me/@friends/@app';
  //var url = '/appdata/@me/@self/@app';
  var data = {
    foo: 'foo_new_new',
	bar: 'bar'
  };

  $.ajax({
    type: 'post', url: url, data: data, dataType: 'data',
	success: function(data) { console.info(data); },
	error: function(xhr) { console.info(xhr); },
	complete: function() {
	  console.log(arguments);
	}
  });
*/
});
//gadgets.ut
</script>
<div id="event1"></div>
]]></Content>
</Module>