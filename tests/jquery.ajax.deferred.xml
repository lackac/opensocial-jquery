<?xml version="1.0" encoding="UTF-8"?>
<Module>
<!--
opensocial-jquery
http://code.google.com/p/opensocial-jquery/

Copyright(C) 2008 LEARNING RESOURCE LAB
http://friendfeed.com/nakajiman
http://hp.submit.ne.jp/d/16750/

Dual licensed under the MIT and GPL licenses:
http://www.opensource.org/licenses/mit-license.php
http://www.gnu.org/licenses/gpl.html
-->
<ModulePrefs title="deferred - jQuery.ajax - opensocial-jquery">
</ModulePrefs>
<Content type="html"><![CDATA[
<script type="text/javascript" src="http://developmentor.lrlab.to/opensocial-jquery/opensocial-jquery.min.js"></script>
<script type="text/javascript">
jQuery(function($) {

  var baseUrl = 'http://developmentor.lrlab.to/opensocial-jquery';
  
  /**
   * success
   */
  var url = baseUrl + '/html.cgi';
  var urlJSON = baseUrl + '/json.cgi';

  /**
   * error
   */
  var parsererrorUrl = baseUrl + '/parsererror.json';
  var notfoundUrl = baseUrl + '/404.html';

  /*
  $.ajax({
    url: url,
    beforeSend: function(xhr) {
      console.log('beforeSend', xhr);
    },
    success: function(data, status) {
      console.log('success', data, status);
    },
    error: function(xhr, status, e) {
      console.log('error', xhr, status, e);
    },
    complete: function(xhr, status) {
      console.log('complete', xhr, status);
    }
  
  }).next(function(first) {
    console.log('next', first);

    return $.ajax({
      //url: url,
      url: parsererrorUrl, dataType: 'json',
    }).next(function(second) {
      console.log('next', second);
	  return [first, second];
    });
  
  }).next(function(third) {
    console.log('next', third);

  }).error(function(status) {
    console.log('error', status);
  });
  */
  
  //$.get(notfoundUrl).next(function(first) {
  $.get(url).next(function(first) {
    console.log(first);
	//throw first;
	//throw Error('foo');

    //return $.getJSON(parsererrorUrl).next(function(second) {
    //return $.getJSON(notfoundUrl).next(function(second) {
    return $.getJSON(urlJSON).next(function(second) {
      console.log(second);
	  return [first, second];
    });
  
  }).next(function(third) {
    console.log(third);

  }).error(function(status) {
    console.log(status);
  });

});
//gadgets.ut
</script>
]]></Content>
</Module>